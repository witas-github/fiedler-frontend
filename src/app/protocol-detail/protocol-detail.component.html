<div class="container-fluid">
	<div class="row mt-3">
		<div class="btn-group ml-0 mr-auto" role="group" aria-label="First group">
			<a class="btn btn-secondary ml-0 mr-2 button-with-icon" routerLink="/protocols" role="button">
				<mat-icon class="mr-2" aria-hidden="false" aria-label="Přidat protokol">undo</mat-icon>
				Back</a>

			<button *ngIf="form" class="btn btn-primary button-with-icon ml-0 mr-2" type="submit" form="protocolDetailForm" [disabled]="!form.valid">
				<mat-icon class="mr-2" aria-hidden="false" aria-label="Uložit">save</mat-icon>
				Save
			</button>

			<a *ngIf="selectedProtocol" class="btn btn-primary ml-0 mr-2 button-with-icon d-none d-lg-inline-flex"
			   routerLink="/devices/protocol/{{selectedProtocol.id}}" role="button">
				<mat-icon class="mr-2" aria-hidden="false" aria-label="Naskenovat zařízení">qr_code_scanner</mat-icon>
				Scan device</a>

			<a *ngIf="selectedProtocol" class="btn btn-primary ml-0 button-with-icon d-none d-lg-inline-flex"
			   routerLink="/create-device/{{selectedProtocol.id}}" role="button">
				<mat-icon class="mr-2" aria-hidden="false" aria-label="Přidat zařízení">my_library_add</mat-icon>
				Add device manually</a>

		</div>
		<div class="d-lg-none btn-group ml-auto mr-0 pull-right" role="group" aria-label="Second group">
		<a *ngIf="selectedProtocol" class="btn btn-primary ml-auto mr-0 button-with-icon float-right"
			   routerLink="/devices/protocol/{{selectedProtocol.id}}" role="button">
				<mat-icon class="" aria-hidden="false" aria-label="Naskenovat zařízení">qr_code_scanner</mat-icon>
			</a>

			<a *ngIf="selectedProtocol" class="btn btn-primary ml-2 mr-0 button-with-icon float-right"
			   routerLink="/create-device/{{selectedProtocol.id}}" role="button">
				<mat-icon class="" aria-hidden="false" aria-label="Přidat zařízení ručně">add</mat-icon>
			</a>

		</div>
	</div>
</div>
<div class="container-fluid">
	<div class="row mt-3 mt-lg-3 mb-lg-0 border-bottom">
		<h1>Protocol detail</h1>


	</div>

	<form *ngIf="form" class="mt-2" [formGroup]="form" (ngSubmit)="submit()" id="protocolDetailForm">
		<div class="form-group">
			<label for="name">Protocol name:</label>
			<input id="name" formControlName="name" type="text" class="form-control"/>

			<label class="mt-2" for="registeredServer">Default server:</label>
			<select id="registeredServer" formControlName="registeredServer" class="form-control">
				<option *ngFor="let server of servers" value="{{server.id}}">{{server.name}}</option>
			</select>

			<label class="mt-2" for="activeServer">Active server:</label>
			<select id="activeServer" formControlName="activeServer" class="form-control">
				<option *ngFor="let server of servers" value="{{server.id}}">{{server.name}}</option>
			</select>
			<div *ngIf="f.name.touched && f.name.invalid" class="alert alert-danger">
				<div *ngIf="f.name.errors.required">Je požadován název.</div>
			</div>
			<span class="container-fluid">*update active server for all devices</span>

		</div>

		<div class="row mt-4">
			<table class="table">
				<thead class="bg-gray">
				<tr>
					<th scope="col">Srn</th>
<!--					<th scope="col">Registrovaný server</th>-->
					<th scope="col">Active server</th>
					<th></th>
				</tr>
				</thead>
				<tbody class="protocols">
				<tr *ngFor="let device of devices">
					<td>{{device.srn}}</td>
<!--					<td><span *ngIf="device.registeredServer">{{device.registeredServer.name}}</span></td>-->
					<td><span *ngIf="device.activeServer">{{device.activeServer.name}}</span></td>
					<td>
						<mat-icon class="mr-2 cursor-pointer" aria-hidden="false" aria-label="Upravit protokol" routerLink="/device-detail/{{device.id}}">edit</mat-icon>
					</td>

				</tr>
				</tbody>
			</table>
		</div>

	</form>
</div>
